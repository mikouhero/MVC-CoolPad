# 2-3 树     

2-3树是一种绝对平衡树。它的节点的元素个数可以为1个或2个。如图，就是一棵2-3树：

![](https://user-gold-cdn.xitu.io/2019/6/4/16b22b34fb7ab151)

2-3树中的2代表一个节点有两个孩子，3代表一个节点有三个孩子。


### 2-3树的操作

##### 插入
![](https://user-gold-cdn.xitu.io/2019/6/4/16b22b34fee5909b)

如图所示，下面一个步骤一个步骤的分析：

    插入1，判断无根节点，直接将1封装为节点并设置为根节点
    插入2，这时因为1节点没有孩子并且只有1节点，所以直接将2加入节点1中
    插入3，和2节点一样，将3节点放入根节点中，这时根节点有3个元素了，就需要变化为步骤4的样子。可以理解成将1，2，3的中间元素提取成根节点，也就是将2提出来，1作为左孩子，3为右孩子
    插入4，4比2大，增加到节点3
    插入5，5比2大，增加到节点3，4中，这时节点3，4变为节点3，4，5，将节点3，4，5按照第三步将中间元素提取为双亲结点，而4提取出来的4回去找双亲节点2，2节点只有一个元素，所以4加入到2节点中
    插入6，6大于根节点的2和4，进入最右边，5没有孩子只有一个元素，加入6到5节点
    插入7，这时5，6，7将6提取出放入6的双亲结点，6的双亲节点（根节点）变为2，4，6。2，4，6提取出4变成最后的样子

总的来说，插入方法和二分搜索树相似。但是每个节点可以有1-2个元素，当节点元素个数为3时，就会分成3个节点并向上合并，直到合并完成。

##### 查找
2-3树的查找和二分搜索树类似，不过因为一个节点可能有2个元素，需要对这两个元素进行比较，分别前往这个节点的左，中，右孩子继续进行比较

##### 删除 

删除叶子节点
- 当前节点是3节点：直接删除
- 当前节点是2节点：删除并判断
    - 双亲是2节点，判断兄弟节点
        + 兄弟节点是3节点，将兄弟节点移到双亲节点，再将双亲节点的另一个元素移动到当前节点
        + 兄弟节点是2节点，先通过移动兄弟节点的中序遍历直接后驱到兄弟节点，以使兄弟节点变为3节点，再进行删除
    - 双亲是3节点，拆分双亲节点使其成为2节点，再将再将双亲节点中最接近的一个拆分key与中孩子合并，将合并后的节点作为当前节点

- 若2-3树是棵满二叉树，删除节点，将2-3树层树减少，并将兄弟节点合并到双亲节点中，同时将双亲节点的所有兄弟节点合并到双亲节点的双亲节点中，如果变为4节点，就做分解操作  

删除非叶子节点         
使用中序遍历下的直接后继节点key来覆盖当前节点key，再删除用来覆盖的后继节点key
