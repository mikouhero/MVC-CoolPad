# 进程 



### 介绍
- linux 系统中的几乎任何行动都会以进程的形式进行
> 浏览器浏览网络时 浏览器就会作为进程运行      
> 键入bash shell 的命令行 这个sheel就作为进程运行
>进程是完成工作的形式 linux 内核的基本职责就是为进程提供做事情的地方以及使用的资源，不让彼此撞车
 
- 进程是已启动的可执行程序的运行实例 进程有一下组成部分 
> 1 已分配内存的地址空间  
> 2  安全属性 包括所有权凭据以及特权   
> 3 程序代码的一个或多个执行进程  
> 4 进程状态

- 进程与程序
> 程序：二进制文件 静态   
> 进程： 是程序运行的过程 动态的产生和消亡 有生命周期和运行状态      

### 进程的属性 
- 进程ID(PID) 是唯一的值 用来区分进程    
- 父进程（PPID） 任何一个进程都可以fork子进程，而自己就是父进程   
- 启动进程的用户ID（UID）和所归属的组（GID)
- 进程状态：分为运行R 休眠S 僵尸Z
- 进程执行的优先级
- 进程所连接的终端名     
- 进程资源占用：如内存 CPU 等
 
### 进程五种状态 
- 可运行 （R）
> 处于可运行状态的进程，一旦有机会 ，就会访问CPU 多个进程可以处于可运行状态 但是因为任何给定时间内只有一个进程在CPU 上运行 所以实际上这些进程中只有一个在任何给定的实例上运行

- 自愿（可中断的）睡眠（s）
> 从名称中可以看出 处于自愿睡眠状态的进程选择处于该状态 通常 这一进程在某事发生之前无事可做

- 非自愿（不可中断或强制）睡眠（D）
> 内核迫使进程进入非自愿睡眠状态 该进程并没有选择休眠 它情缘运行以便作完事情，当资源被释放时 内核会唤醒进程并将设置为可运行状态 

- 停止的（挂起的）进程（T）
> 用户有时决定挂起进程  被挂起的进程在被用户重启启动前不会执行任何操作 
    
- 僵尸进程（z）
> 每个快要终止的进程会经历一个短暂的僵尸状态 然而有时有些进程会一直停留在僵尸状态

###  进程管理 

- ps 静态任务管理器  显示上一秒的进程状态 
- top 动态任务管理器 
- kill 杀死单个进程 
- killall 杀死一个进程树

- ps 【option】
> a 显示跟当前终端关联的所有进程  
> u 基于樱花的格式显示   
> U 显示某用户ID 的所有进程
> x 显示所有进程 不以终端机来区分 
> A 显示所有程序   
> e 此参数的效果和指定A参数相同  
> f 用ASCII 字符显示树状结构 表达程序间的相互关系  
> o 自定义输出格式


```html
    [root@izbp1eqeq1dzg097s12dhjz ~]# ps -aux
    USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
    root         1  0.0  0.1  43836  3456 ?        Ss   5月12   1:56 /usr/lib/syste

USER  进程拥有者
PID    pid
%CPU 占用cpu使用率 
%MEM    占用内存使用率
VSZ     占用虚拟内存大小 （理论无线大）
RSS     占用内存大小
TTY     终端号码
STAT    进程状态
START   进程开始时间
TIME    执行的时间
COMMAND     所执行的命令

```


- top
```html

top - 21:00:24 up 116 days,  7:07,  2 users,  load average: 0.00, 0.01, 0.05
      当前时间      执行时间           当前登录系统用户数   CPU 的1 、5 、15 min 的负载情况
Tasks: 123 total,   2 running, 121 sleeping,   0 stopped,   0 zombie
        总进程数    正在运行的进程数  睡眠的进程数   停止的进程数   僵尸进程数
%Cpu(s):  1.7 us,  1.3 sy,  0.0 ni, 97.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
           系统用户进程使用CPU的百分比
                    内核中的进程占用cpu百分比
                            用户进程空间内改变优先级的进程占用cpu百分比
                                       空闲的cpu百分比 
                                               cpu 等待io完成的时间总量
                                                        硬中断占比
                                                                软中断占比
                                                                        虚拟机占用物理的时间
KiB Mem :  1882028 total,    68772 free,  1199944 used,   613312 buff/cache
物理内存    内存总量            空闲总量      使用的总量            内核缓存内存量

KiB Swap:        0 total,        0 free,        0 used.   521860 avail Mem 
交换内存        交换分区总量          空闲交换总量      使用交换的总量     可利用内存总量    
  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND     
进程号 
    进程管理用户
                进程优先级
                    nice 负值表示最高优先级 正值表示最低优先级
                          虚拟内存 
                                 物理内存
                                        共享内存
                                             进程状态
                                                上次更新到现在的CPU时间占用百分比
                                                     进程使用的物理内存百分比
                                                                进程使用的CPU时间总计 单位 1/100秒
                                                                        进程名称        
17407 root      10 -10  132476  10296   7160 S  1.0  0.5  22:39.00 AliYunDu

top 快捷键 
s  默认三秒刷新一次 按s 修改刷新时间
空格 立即刷新
q 退出
P 按CPU排序
M 按内存排序
T 按时间排序
数字1 显示每个内核的CPU使用率
u/U 指定用户

```


- 进程终结 
> 终结单个进程kill 【pid】  
> 终结一个进程 killall 【process name】 
> kill 【option】 【pid】
> l 打印信号编号  
>a 当处理当前进程时 不限制命令名和进程号的对应关系 
>p 只打印相关进程的进程号 而不发送任何信号 
>s 指定发送信号   
>u 指定用户 kill 某个用户的所有进程  

- kill 工作原理
> 向linux 内核发送一个系统操作信号和某个程序的进程标识号 然后系统内核就可以对进程标示号指定的进程进行操作   

