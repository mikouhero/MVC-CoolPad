# 索引
 
 
什么是索引（index）
- 是一种快速查询表中内容的机制，类似新华字典的目录
- 运用在表中某些字段上，但存储时，独立表之外

索引表把数据变成是有序的

![](https://user-gold-cdn.xitu.io/2018/3/5/161f3dde48b22b04)

快速定位到硬盘中的数据文件

![](https://user-gold-cdn.xitu.io/2018/3/5/161f3dfcf48a420a)


MySQL的基础存储结构是页（记录都存在页里面）

![](https://user-gold-cdn.xitu.io/2018/7/23/164c6d7a53a7920b)

![](https://user-gold-cdn.xitu.io/2018/7/23/164c6d7a53b78847)

- `每个数据页`可以组成一个`双向链表`
- `每个数据页中的记录`又可以组成一个`单向链表`
    + 每个数据页都会为存储在它里边儿的记录生成一个`页目录`，在通过主键查找某条记录的时候可以在页目录中使用`二分法快速定位`到对应的槽，然后再遍历该槽对应分组中的记录即可快速找到指定的记录
    + 以其他列(非主键)作为搜索条件：只能从最小记录开始`依次遍历单链表中的每条记录`。


所以说，如果我们写 select * from user where username = '张三' 这样没有进行任何优化的sql语句，默认会这样做：
- 定位到记录所在的页
    + 需要遍历双向链表，找到所在的页
- 从所在的页内中查找相应的记录
    + 由于不是根据主键查询，只能遍历所在页的单链表了

很明显，在数据量很大的情况下这样查找会很慢！

索引的优点：  
    1、唯一索引可以保证每一行数据的唯一性     
    2、提高查询速度    
    3、加速表与表的连接  
    4、显著的减少查询中分组和排序的时间  
    5、通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。 

索引的缺点：          
    1、创建跟维护都需要耗时        
    2、创建索引时，需要对表加锁，在锁表的同时，可能会影响到其他的数据操作     
    3、索引需要磁盘的空间进行存储，磁盘占用也很快。       
    4、当对表中的数据进行CRUD的时，也会触发索引的维护，而维护索引需要时间，可能会降低数据操作性能   






