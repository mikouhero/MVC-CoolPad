# 聚簇索引与非聚簇索引

### 聚簇索引
聚集索引就是以主键创建的索引
- 使用记录主键值的大小来进行记录和页的排序。
    +   页内的记录是按照主键的大小顺序排成一个单项链表。
    +  各个存放用户记录的页也是根据页中用户记录的主键大小顺序排成一个双向链表。
- 叶子节点存储的是`完整的用户记录`    
`聚簇索引不需要我们显示的创建，他是由InnoDB存储引擎自动为我们创建的。如果没有主键，其也会默认创建一个`


### 非聚簇索引(二级索引)
非聚集索引就是以非主键创建的索引

非聚集索引在建立的时候也未必是单列的，可以多个列来创建索引。
- 叶子节点内部使用索引字段排序，叶子节点之间也是使用索引字段排序。
- 叶子节点不再是完整的数据记录，而是索引和主键值。
- 此时就涉及到了哪个列会走索引，哪个列不走索引的问题了
- 创建多个单列(非聚集)索引的时候，会生成多个索引树(所以过多创建索引会占用磁盘空间)
![](https://user-gold-cdn.xitu.io/2018/7/23/164c6d7aca19377b)




### 区别 
- 聚簇索引在叶子节点上存储的是`表中的数据`
- 非聚簇索引在叶子节点存储的是`主键和索引列`
- 使用非聚集索引查询出数据时，拿到叶子上的主键再去查到想要查找的数据。(拿到主键再查找这个过程叫做`回表`)
- InnoDB支持聚簇索引，MyISAM不支持聚簇索引
